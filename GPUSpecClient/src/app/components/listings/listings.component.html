<div class="flex flex-column listings-container">
  @if (isLoading) {
  <div class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
  </div>
  }@else if (data) {
  <div class="flex flex-row listings-bar">
    <span>
      Showing {{ (data.pageIndex - 1) * data.pageSize + 1 }} -
      {{
        data.pageIndex * data.pageSize > data.totalCount
          ? data.totalCount
          : data.pageIndex * data.pageSize
      }}
      of {{ data.totalCount }} results
    </span>

    <mat-form-field subscriptSizing="dynamic">
      <mat-label>Select Sort Option</mat-label>
      <mat-select [(value)]="selectedSortOption" (selectionChange)="onSubmit()">
        @for (sortOption of sortOptions; track sortOption) {
        <mat-option [value]="sortOption.value">{{
          sortOption.display
        }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>
  <div class="flex flex-column listings-items">
    @if (data) { @for (listing of data.data; track listing) {
    <app-listing-tile [listing]="listing"></app-listing-tile>
    } }
  </div>
  <mat-paginator
    [length]="data.totalCount"
    [pageSize]="data.pageSize"
    [pageIndex]="data.pageIndex - 1"
    [pageSizeOptions]="[10, 25, 50]"
    (page)="onPageChange($event)"
    aria-label="Select page"
  >
  </mat-paginator>
  }
</div>
